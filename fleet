using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace практика7
{
    internal class Fleet
    {
        public List<Car> Cars = new List<Car>();
        public List<Driver> Drivers;
        public List<Trip> Trips = new List<Trip>();
        public string AddCar(Car car)
        {
            Cars.Add(car);
            return($"{car.Model} был добавлен в автопарк");
        }
        public string RegisterDriver(Driver driver)
        {
            Drivers.Add(driver);
            return($"{driver.Name} был зарегистрирован в автопарке");
        }
        public void CreateTrip(Driver driver, Car car, DateTime startTime, DateTime endTime, DateTime tripDate) 
        {
            Trip trip = new Trip(driver, car)
            {
                StartTime = startTime,
                EndTime = endTime,
                TripDate = tripDate
            };
            Trips.Add(trip);
        }
        public string DisplayTripsByDate(List<Trip> trips, DateTime date)
        {
            string result = "";
            foreach (Trip trip in trips) 
            {
                string carDetails = "";
                string carType = trip.Car is Sedan ? "седан" : "грузовой автомобиль";
                if (trip.Car is Sedan sedan)
                {
                    carDetails += $"Автомобиль:\nМарка:{trip.Car.Model}\nВместимость: {sedan.TrunkCapacity} литров\nТип топлива:{sedan.FuelOftype().ToLower()}\nТип автомобиля: {carType.ToLower()}\n";
                }
                else if (trip.Car is Truck truck)
                {
                    carDetails += $"Автомобиль:\nМарка:{trip.Car.Model}\nВместимость: {truck.LoadCapacity} литров\nТип топлива:{truck.FuelOftype().ToLower()}\nТип автомобиля: {carType.ToLower()}\n";
                }
            result += (trip.TripDate.Year == date.Year && trip.TripDate.Month == date.Month && trip.TripDate.Day == date.Day) ? $"\nВодитель: {trip.Driver.Name}\n{carDetails}\n{trip.DisplayTripInfo()}\n\n" : "";
            }
            return result;
        }
        
    }
}

